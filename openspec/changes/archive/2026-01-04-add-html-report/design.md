## Context

`print_exe_deps.py` 是一个 Windows PE 文件依赖分析工具，当前仅支持终端输出。为了更好地保存和分享分析结果，需要添加 HTML 报告功能。

**约束条件：**
- 必须生成单一静态 HTML 文件（无外部依赖）
- 所有 CSS 和 JavaScript 必须内嵌
- 不依赖任何前端框架
- 保持原有终端输出功能不变

## Goals / Non-Goals

**Goals:**
- 生成可离线查看的单文件 HTML 报告
- 支持无限深度的可折叠依赖树
- 提供直观的交互体验（展开/折叠、详情查看）
- 包含完整的依赖统计汇总

**Non-Goals:**
- 不实现服务器端功能
- 不支持实时更新
- 不添加外部 CDN 依赖

## Decisions

### 1. 单文件 HTML 方案
**决定：** 所有资源（CSS、JS、数据）内嵌到单个 HTML 文件中

**原因：**
- 便于分享和存档
- 无需网络即可查看
- 简化部署和使用

**替代方案：**
- 多文件输出（HTML + CSS + JS）→ 管理复杂，不便分享
- 使用模板引擎（Jinja2）→ 增加依赖，对于单文件场景过度设计

### 2. 依赖树数据格式
**决定：** 使用 JSON 格式嵌入 HTML，前端 JavaScript 动态渲染

**数据结构：**
```json
{
  "exe_info": {
    "name": "app.exe",
    "path": "D:\\path\\to\\app.exe",
    "arch": "x64 (64位)"
  },
  "tree": {
    "name": "app.exe",
    "path": "...",
    "type": "exe",
    "children": [...]
  },
  "summary": {
    "local_count": 10,
    "system_count": 25,
    "missing_count": 2,
    "total": 37
  },
  "dependencies": {
    "local": [...],
    "system": [...],
    "missing": [...]
  }
}
```

### 3. 前端交互实现
**决定：** 使用原生 JavaScript + CSS，无框架依赖

**交互方式：**
- 树节点：点击展开/折叠子节点
- 详情面板：固定平铺布局，鼠标悬停节点时动态显示详情
- 全局控制：顶部按钮控制全部展开/折叠

**节点图标设计：**
- `+` 折叠状态的本地 DLL（有子节点）
- `-` 展开状态的本地 DLL（有子节点）
- `·` 本地 DLL（无子节点）
- `S` 系统 DLL
- `X` 缺失 DLL

### 4. 视觉设计
**决定：** 采用简洁现代的深色主题

**配色方案：**
- 背景：深灰色 (#1e1e1e)
- 本地 DLL：绿色标记 (#4ec9b0)
- 系统 DLL：蓝色标记 (#569cd6)
- 缺失 DLL：红色标记 (#f14c4c)
- 文本：浅灰色 (#d4d4d4)

## Risks / Trade-offs

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| HTML 文件过大 | 加载缓慢 | 深度依赖树可能产生大量数据，但通常 PE 依赖不会超过几百个节点，可接受 |
| 浏览器兼容性 | 部分功能失效 | 使用标准 ES6 语法，支持主流现代浏览器 |
| 循环依赖显示 | 无限递归 | 已有循环检测机制，HTML 中标记为 "(circular)" 并停止展开 |

## Open Questions

无

